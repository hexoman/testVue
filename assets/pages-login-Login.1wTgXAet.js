import{o,s as e,S as s,a as t,c as r,b as l,d as n}from"./index-BHzFND5V.js";import{o as a,g as i,a as c,l as p}from"./uni-app.es.wfT66NnM.js";import{g}from"./urls.C5tAqjpy.js";import{_ as d}from"./_plugin-vue_export-helper.BCo6x5W8.js";const f=d({__name:"Login",setup(d){var f="";a((o=>{})),o((async()=>{let o=g(window.location.href);console.log("params:",o),console.log("code:",o.code),""==o.code||null==o.code?(console.log("sssss"),window.location.href=window.location.origin+"?appId="+I("app")):(f=o.code,console.log("authCode:",f),u())}));const u=()=>{console.log("getToken pro"),i(I("app"),k("corp")).then((o=>{console.log("getToken response:",o),0==o.errcode?m(o.data.token):e({title:o.errmsg,icon:"fail",duration:2e3})})).catch((o=>{console.error("getToken error:",o)})).finally((()=>{}))},m=o=>{console.log("getUserInfo pro"),c(o,f).then((s=>{console.log("getUserInfo response:",s),0==s.errcode?h(s.data.userCode,o):e({title:s.errmsg,icon:"fail",duration:2e3})})).catch((o=>{console.error("getUserInfo error:",o)})).finally((()=>{}))},h=(o,r)=>{const l={Account:o,Password:w(r)};console.log("loginRequest:",l),p(l).then((o=>{console.log("loginRequest response:",o),0==o.code&&(s.setItem("userInfo",JSON.stringify(o.data)),s.setItem("userToken",o.token),t({url:"/pages/approve/ApproveList"}))})).catch((o=>{e({title:o,icon:"fail",duration:2e3}),console.error("loginRequest err:",o)})).finally((()=>{}))},I=o=>_("10",o).split("^")[0]+_("02",o).split("^")[0]+_("00",o).split("^")[0],k=o=>_("7G6cTiOeAt",o).split("^")[0]+_("ixo35o1",o).split("^")[0]+_("k9j8MqJL",o).split("^")[0]+_("Qbf3GZD",o).split("^")[0],w=o=>_("pBylNMFf1",o).split("^")[0]+_("jBAYpex",o).split("^")[0]+_("/6bDSw",o).split("^")[0]+_("==",o).split("^")[0],_=(o,e)=>o+"^"+e;return(o,e)=>(n(),r("div",{class:"container"},[l("img",{src:"/assets/loading-DdFEhOBk.gif",alt:"加载中的GIF",class:"centered-gif"})]))}},[["__scopeId","data-v-1af86a0b"]]);export{f as default};
