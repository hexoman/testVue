import{d as e,r as a,w as s,e as t,b as l,f as o,g as n,h as c,i as r,j as u,n as d,k as i,u as m,c as p,l as f,t as _,F as h,m as v,p as y,I as g,q as k,o as C,s as w,v as S,x as b,y as x}from"./index-ocBV1Jcm.js";import{u as j,_ as I}from"./wd-search.DbcZ-QIr.js";import{o as $,S as D,g as N,r as L}from"./uni-app.es.HavBLUR1.js";import{_ as B}from"./wd-status-tip.BSaN_nvR.js";import{b as E,m as V,a as P,_ as A,o as O}from"./wd-icon.BMHP6ZQG.js";import{_ as Q}from"./_plugin-vue_export-helper.BCo6x5W8.js";import{n as H}from"./index.BeurTFNn.js";import{o as J,E as R}from"./eventBus.B4SEjQ6A.js";const U=Q(e({name:"wd-tag",options:{addGlobalClass:!0,virtualHost:!0,styleIsolation:"shared"},props:{...E,useIconSlot:V(!1),type:P("default"),icon:P(""),closable:V(!1),plain:V(!1),dynamic:V(!1),color:P(""),bgColor:P(""),round:V(!1),mark:V(!1)},emits:["click","close","confirm"],setup(e,{emit:C}){const w=e,S=C,{translate:b}=j("tag"),x=a(""),I=a(""),$=a(!1);s([()=>w.useIconSlot,()=>w.icon,()=>w.plain,()=>w.dynamic,()=>w.round,()=>w.mark],(()=>{B()}),{deep:!0,immediate:!0}),s((()=>w.type),(e=>{if(!e)return;const a=["primary","danger","warning","success","default"];-1===a.indexOf(e)&&console.error(`type must be one of ${a.toString()}`),B()}),{deep:!0,immediate:!0}),s((()=>$.value),(()=>{B()}),{deep:!0,immediate:!0});const D=t((()=>`wd-tag ${w.customClass} ${x.value}`)),N=t((()=>{const e={};return!w.plain&&w.bgColor&&(e.background=w.bgColor),w.bgColor&&(e["border-color"]=w.bgColor),`${O(e)};${w.customStyle}`})),L=t((()=>{const e={};return w.color&&(e.color=w.color),O(e)}));function B(){const{type:e,plain:a,round:s,mark:t,dynamic:l,icon:o,useIconSlot:n}=w;let c=[];e&&c.push(`is-${e}`),a&&c.push("is-plain"),s&&c.push("is-round"),t&&c.push("is-mark"),l&&c.push("is-dynamic"),$.value&&c.push("is-dynamic-input"),(o||n)&&c.push("is-icon"),x.value=c.join(" ")}function E(e){S("click",e)}function V(e){S("close",e)}function P(){$.value=!0,I.value=""}function Q(){J()}function H(e){J(),S("confirm",{value:e.detail.value})}function J(){$.value=!1}return(e,a)=>{const s=y,t=g,C=k;return l(),o(s,{class:v(D.value),style:d(N.value),onClick:E},{default:n((()=>[e.useIconSlot?(l(),o(s,{key:0,class:"wd-tag__icon"},{default:n((()=>[c(e.$slots,"icon",{},void 0,!0)])),_:3})):e.icon?(l(),o(A,{key:1,name:e.icon,"custom-class":"wd-tag__icon"},null,8,["name"])):r("",!0),u(s,{class:"wd-tag__text",style:d(L.value)},{default:n((()=>[c(e.$slots,"default",{},void 0,!0)])),_:3},8,["style"]),e.closable&&e.round?(l(),o(s,{key:2,class:"wd-tag__close",onClick:i(V,["stop"])},{default:n((()=>[u(A,{name:"error-fill"})])),_:1})):r("",!0),$.value&&e.dynamic?(l(),o(t,{key:3,class:"wd-tag__add-text",placeholder:m(b)("placeholder"),type:"text",focus:"true",modelValue:I.value,"onUpdate:modelValue":a[0]||(a[0]=e=>I.value=e),onBlur:Q,onConfirm:H},null,8,["placeholder","modelValue"])):e.dynamic?(l(),o(s,{key:4,class:"wd-tag__text",style:d(L.value),onClick:i(P,["stop"])},{default:n((()=>[e.$slots.add?c(e.$slots,"add",{key:0},void 0,!0):(l(),p(h,{key:1},[u(A,{name:"add","custom-class":"wd-tag__add wd-tag__icon"}),u(C,null,{default:n((()=>[f(_(m(b)("add")),1)])),_:1})],64))])),_:3},8,["style"])):r("",!0)])),_:3},8,["class","style"])}}}),[["__scopeId","data-v-30d4b60c"]]);const q=Q({setup(){const e=a("");a(!1);const s=a([]),l=a(""),o=t((()=>s.value.length));$((e=>{}));C((async()=>{n(),J(R.refreshApprovalList,n),J(R.saveSuccessEvent,n),J(R.submitSuccessEvent,n);let e=JSON.parse(D.getItem("userInfo"));l.value=e.EmployeeName||"",console.log(e.EmployeeName)}));const n=()=>{w({mask:!0});let a=JSON.parse(D.getItem("userInfo"));var t={SortPara:"",PageSize:"50",PageNumber:"1",PageCount:"1",RowCount:"1500",DeliveryCode:e.value,StartDate:"",EndDate:"",HRCode:a.Account};N(t).then((e=>{S(),0!==e.data.length&&(s.value=e.data[0])})).catch((e=>{S()}))};return{searchQuery:e,approveList:s,nickName:l,listCount:o,handleClear:()=>{console.log("handleClear",e.value),e.value="",n()},handleSearch:()=>{console.log("handleSearch",e.value),n()},jumpDetail:e=>{H("/pages/approve/ApproveDetail",e)}}}},[["render",function(e,a,s,t,c,d){const i=k,m=y,v=L(b("wd-search"),I),g=L(b("wd-status-tip"),B),C=L(b("wd-tag"),U);return l(),o(m,{class:"container"},{default:n((()=>[u(m,{class:"header"},{default:n((()=>[u(i,{class:"welcome"},{default:n((()=>[f("欢迎您, "+_(t.nickName),1)])),_:1}),u(i,{class:"pending-tasks"},{default:n((()=>[f("您有 "+_(t.listCount)+" 单领用申请待审批",1)])),_:1})])),_:1}),u(m,{class:"search-bar"},{default:n((()=>[u(v,{modelValue:t.searchQuery,"onUpdate:modelValue":a[0]||(a[0]=e=>t.searchQuery=e),"hide-cancel":"",onSearch:t.handleSearch,onBlur:t.handleSearch,onClear:t.handleClear,maxlength:"100"},null,8,["modelValue","onSearch","onBlur","onClear"])])),_:1}),0===t.approveList.length?(l(),o(g,{key:0,image:"search",tip:"没有待审核数据"})):r("",!0),t.approveList.length>0?(l(),o(m,{key:1,class:"list"},{default:n((()=>[(l(!0),p(h,null,x(t.approveList,((e,a)=>(l(),o(m,{key:a,class:"list-item",onClick:a=>t.jumpDetail(e)},{default:n((()=>[u(m,{class:"item-header"},{default:n((()=>[u(i,{class:"item-title"},{default:n((()=>[f(_(e.title),1)])),_:2},1024)])),_:2},1024),u(m,{class:"item-content"},{default:n((()=>[u(i,{class:"item-dept"},{default:n((()=>[f(_(e.DeptName),1)])),_:2},1024),u(i,{class:"item-id"},{default:n((()=>[f(_(e.DeliveryCode),1)])),_:2},1024),u(m,{style:{"flex-direction":"row"}},{default:n((()=>[u(i,{class:"item-normal-text"},{default:n((()=>[f("由 ")])),_:1}),u(i,{class:"item-author"},{default:n((()=>[f(_(e.BLMakerName),1)])),_:2},1024),u(i,{class:"item-normal-text"},{default:n((()=>[f(" 于 ")])),_:1}),u(i,{class:"item-normal-text"},{default:n((()=>[f(_(e.BLDate.substring(0,10)),1)])),_:2},1024),u(i,{class:"item-normal-text"},{default:n((()=>[f(" 提交")])),_:1})])),_:2},1024)])),_:2},1024),u(m,{class:"item-footer"},{default:n((()=>["11"===e.Status?(l(),o(i,{key:0,class:"not-reviewed"},{default:n((()=>[u(C,{type:"warning",mark:""},{default:n((()=>[f("未审核")])),_:1})])),_:1})):(l(),o(i,{key:1},{default:n((()=>[u(C,{type:"success",mark:""},{default:n((()=>[f("已审核")])),_:1})])),_:1}))])),_:2},1024)])),_:2},1032,["onClick"])))),128))])),_:1})):r("",!0)])),_:1})}],["__scopeId","data-v-7a9f6c8b"]]);export{q as default};
