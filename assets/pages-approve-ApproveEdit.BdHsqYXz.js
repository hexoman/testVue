import{r as e,g as a,h as s,q as o,d as l,k as t,m as n,Z as c,s as u,S as r,x as i,Y as p,y as d,v as f,a1 as m,G as v}from"./index-BHzFND5V.js";import{o as _,f as g}from"./uni-app.es.wfT66NnM.js";import{e as y,E as h}from"./eventBus.4pzzkI7_.js";import{_ as k}from"./_plugin-vue_export-helper.BCo6x5W8.js";const b=k({__name:"ApproveEdit",setup(k){const b=e(""),j=e(""),x=e("pass"),I=()=>{"pass"===x.value?c({title:"您的审核意见：",content:"您同意通过这张申请单!",success:function(e){e.confirm?A(!0):e.cancel&&console.log("用户点击取消")}}):""===b.value?u({title:"需要填写不通过意见",icon:"none",duration:1500}):c({title:"您的审核意见：",content:"您拒绝通过这张申请单!",success:function(e){e.confirm?A(!1):e.cancel&&console.log("用户点击取消")}})},A=e=>{let a=JSON.parse(r.getItem("userInfo")),s={DeliveryID:j.value,Status:e?"21":"31",Remark:b.value,HRCode:a.Account};console.log(s),i({mask:!0}),g(s).then((e=>{console.log("submitApproval:",e),0==e.code?c({title:"",content:"单据审核成功！",confirmText:"回到首页",showCancel:!1,success:function(e){e.confirm&&(p({delta:2}),y(h.refreshApprovalList,{}))}}):u({title:e.msg,icon:"none",duration:1500})})).catch((e=>{d(),console.log(e)}))};return _((e=>{x.value=e.passType,j.value=e.deliveryID,console.log(j.value)})),(e,c)=>{const u=f,r=o,i=m,p=v;return l(),a(r,{class:"container"},{default:s((()=>["pass"===x.value?(l(),a(r,{key:0,class:"description-pass"},{default:s((()=>[t(u,null,{default:s((()=>[n(" 您同意通过此申请单申请")])),_:1})])),_:1})):(l(),a(r,{key:1,class:"description-fail"},{default:s((()=>[t(u,null,{default:s((()=>[n(" 您不同意通过此申请单申请")])),_:1})])),_:1})),t(r,{class:"input-container"},{default:s((()=>[t(i,{modelValue:b.value,"onUpdate:modelValue":c[0]||(c[0]=e=>b.value=e),placeholder:"请输入详细意见"},null,8,["modelValue"])])),_:1}),t(r,{class:"button-container"},{default:s((()=>[t(p,{type:"primary",onClick:I},{default:s((()=>[n("确认")])),_:1})])),_:1})])),_:1})}}},[["__scopeId","data-v-ba132bab"]]);export{b as default};
